#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,67790},
        {-15,53460},
        {-10,42450},
        { -5,33930},
        {  0,27280},
        {  5,22070},
        { 10,17960},
        { 15,14700},
        { 20,12090},
        { 25,10000},
        { 30,8312},
        { 35,6942},
        { 40,5826},
        { 45,4911},
        { 50,4158},
        { 55,3536},
        { 60,3019}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0,4300},
	{1,4279},
	{3,4261},
	{4,4241},
	{6,4220},
	{8,4197},
	{9,4175},
	{11,4155},
	{12,4139},
	{14,4124},
	{16,4111},
	{17,4100},
	{19,4089},
	{20,4079},
	{22,4067},
	{24,4051},
	{25,4032},
	{27,4014},
	{28,3999},
	{30,3986},
	{32,3977},
	{33,3966},
	{35,3958},
	{36,3947},
	{38,3938},
	{40,3927},
	{41,3917},
	{43,3906},
	{44,3895},
	{46,3885},
	{48,3875},
	{49,3867},
	{51,3859},
	{53,3851},
	{54,3845},
	{56,3839},
	{57,3833},
	{59,3829},
	{61,3823},
	{62,3818},
	{64,3813},
	{65,3809},
	{67,3806},
	{69,3801},
	{70,3798},
	{72,3795},
	{73,3792},
	{75,3790},
	{77,3788},
	{78,3786},
	{80,3784},
	{81,3782},
	{83,3780},
	{85,3777},
	{86,3775},
	{88,3773},
	{89,3772},
	{90,3770},
	{91,3768},
	{91,3767},
	{92,3766},
	{93,3764},
	{93,3764},
	{94,3763},
	{94,3762},
	{94,3761},
	{95,3759},
	{95,3759},
	{95,3758},
	{96,3757},
	{96,3755},
	{96,3755},
	{97,3753},
	{97,3753},
	{97,3753},
	{97,3751},
	{98,3750},
	{98,3749},
	{98,3748},
	{98,3748},
	{98,3747},
	{98,3746},
	{98,3744},
	{99,3743},
	{99,3742},
	{99,3741},
	{99,3741},
	{99,3740},
	{99,3739},
	{99,3739},
	{100,3400}
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0,4312},
	{1,4288},
	{2,4271},
	{3,4256},
	{5,4242},
	{6,4227},
	{7,4214},
	{9,4199},
	{10,4186},
	{11,4173},
	{12,4160},
	{14,4147},
	{15,4134},
	{16,4122},
	{18,4110},
	{19,4097},
	{20,4088},
	{21,4080},
	{23,4068},
	{24,4054},
	{25,4037},
	{27,4020},
	{28,4006},
	{29,3995},
	{30,3984},
	{32,3975},
	{33,3966},
	{34,3956},
	{36,3947},
	{37,3936},
	{38,3924},
	{40,3912},
	{41,3900},
	{42,3888},
	{43,3877},
	{45,3868},
	{46,3860},
	{47,3853},
	{49,3846},
	{50,3840},
	{51,3834},
	{52,3829},
	{54,3824},
	{55,3820},
	{56,3814},
	{58,3810},
	{59,3806},
	{60,3802},
	{62,3798},
	{63,3795},
	{64,3791},
	{65,3789},
	{67,3786},
	{68,3786},
	{69,3783},
	{71,3782},
	{72,3779},
	{73,3778},
	{74,3776},
	{76,3773},
	{77,3771},
	{78,3766},
	{80,3762},
	{81,3756},
	{82,3748},
	{83,3741},
	{85,3730},
	{86,3720},
	{87,3710},
	{89,3704},
	{90,3699},
	{91,3696},
	{93,3694},
	{94,3691},
	{95,3688},
	{96,3686},
	{96,3682},
	{97,3679},
	{97,3675},
	{98,3669},
	{98,3663},
	{98,3656},
	{99,3650},
	{99,3644},
	{99,3639},
	{99,3634},
	{99,3630},
	{99,3627},
	{99,3622},
	{99,3619},
	{100,3400}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0,4337},
	{1,4321},
	{2,4307},
	{3,4292},
	{4,4278},
	{6,4265},
	{7,4251},
	{8,4237},
	{9,4224},
	{10,4211},
	{12,4197},
	{13,4184},
	{14,4172},
	{15,4158},
	{16,4146},
	{18,4133},
	{19,4121},
	{20,4107},
	{21,4096},
	{22,4084},
	{24,4075},
	{25,4064},
	{26,4052},
	{27,4038},
	{29,4025},
	{30,4012},
	{31,4001},
	{32,3990},
	{33,3981},
	{35,3973},
	{36,3964},
	{37,3957},
	{38,3947},
	{39,3937},
	{41,3925},
	{42,3911},
	{43,3896},
	{44,3883},
	{45,3872},
	{47,3863},
	{48,3855},
	{49,3849},
	{50,3843},
	{51,3837},
	{53,3832},
	{54,3826},
	{55,3822},
	{56,3817},
	{58,3812},
	{59,3807},
	{60,3804},
	{61,3799},
	{62,3796},
	{64,3793},
	{65,3788},
	{66,3785},
	{67,3783},
	{68,3779},
	{70,3777},
	{71,3773},
	{72,3771},
	{73,3767},
	{74,3764},
	{76,3760},
	{77,3755},
	{78,3750},
	{79,3744},
	{81,3739},
	{82,3731},
	{83,3720},
	{84,3711},
	{85,3698},
	{87,3689},
	{88,3687},
	{89,3686},
	{90,3686},
	{91,3684},
	{93,3682},
	{94,3678},
	{95,3663},
	{96,3618},
	{97,3560},
	{99,3481},
	{100,3366},
	{100,3331},
	{100,3315},
	{100,3305},
	{100,3300},
	{100,3300},
	{100,3300},
	{100,3300}
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0,4343},
	{1,4329},
	{2,4314},
	{3,4300},
	{4,4286},
	{6,4273},
	{7,4258},
	{8,4245},
	{9,4232},
	{10,4219},
	{12,4204},
	{13,4191},
	{14,4178},
	{15,4165},
	{16,4152},
	{18,4139},
	{19,4126},
	{20,4114},
	{21,4103},
	{22,4089},
	{24,4078},
	{25,4065},
	{26,4055},
	{27,4043},
	{29,4031},
	{30,4020},
	{31,4008},
	{32,3998},
	{33,3988},
	{35,3980},
	{36,3969},
	{37,3960},
	{38,3952},
	{39,3941},
	{41,3932},
	{42,3922},
	{43,3910},
	{44,3894},
	{45,3880},
	{47,3869},
	{48,3861},
	{49,3853},
	{50,3847},
	{52,3840},
	{53,3834},
	{54,3829},
	{55,3824},
	{56,3819},
	{58,3814},
	{59,3809},
	{60,3804},
	{61,3800},
	{62,3795},
	{64,3792},
	{65,3788},
	{66,3785},
	{67,3782},
	{69,3778},
	{70,3774},
	{71,3768},
	{72,3759},
	{73,3753},
	{75,3750},
	{76,3746},
	{77,3742},
	{78,3736},
	{79,3731},
	{81,3726},
	{82,3721},
	{83,3713},
	{84,3704},
	{85,3694},
	{87,3681},
	{88,3675},
	{89,3673},
	{90,3672},
	{91,3671},
	{93,3669},
	{94,3667},
	{95,3661},
	{96,3635},
	{98,3590},
	{99,3532},
	{100,3450},
	{100,3450},
	{100,3450},
	{100,3450},
	{100,3450},
	{100,3450},
	{100,3450},
	{100,3450}
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{148,4300},
	{742,4279},
	{767,4261},
	{782,4241},
	{792,4220},
	{812,4197},
	{842,4175},
	{872,4155},
	{897,4139},
	{910,4124},
	{917,4111},
	{927,4100},
	{932,4089},
	{947,4079},
	{960,4067},
	{965,4051},
	{972,4032},
	{982,4014},
	{997,3999},
	{1002,3986},
	{1017,3977},
	{1022,3966},
	{1032,3958},
	{1032,3947},
	{1042,3938},
	{1042,3927},
	{1045,3917},
	{1047,3906},
	{1055,3895},
	{1060,3885},
	{1065,3875},
	{1075,3867},
	{1082,3859},
	{1090,3851},
	{1100,3845},
	{1110,3839},
	{1120,3833},
	{1135,3829},
	{1145,3823},
	{1155,3818},
	{1167,3813},
	{1180,3809},
	{1197,3806},
	{1200,3801},
	{1215,3798},
	{1235,3795},
	{1245,3792},
	{1267,3790},
	{1290,3788},
	{1315,3786},
	{1340,3784},
	{1362,3782},
	{1387,3780},
	{1412,3777},
	{1437,3775},
	{1432,3773},
	{1432,3772},
	{1425,3770},
	{1422,3768},
	{1420,3767},
	{1415,3766},
	{1410,3764},
	{1410,3764},
	{1407,3763},
	{1405,3762},
	{1402,3761},
	{1400,3759},
	{1400,3759},
	{1395,3758},
	{1395,3757},
	{1390,3755},
	{1390,3755},
	{1385,3753},
	{1387,3753},
	{1385,3753},
	{1380,3751},
	{1377,3750},
	{1372,3749},
	{1372,3748},
	{1375,3748},
	{1372,3747},
	{1367,3746},
	{1362,3744},
	{1357,3743},
	{1357,3742},
	{1352,3741},
	{1357,3741},
	{1357,3740},
	{1347,3739},
	{1350,3739},
	{505,3400}
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{148,4312},
	{450,4288},
	{460,4271},
	{470,4256},
	{477,4242},
	{482,4227},
	{487,4214},
	{485,4199},
	{492,4186},
	{500,4173},
	{502,4160},
	{505,4147},
	{512,4134},
	{517,4122},
	{522,4110},
	{522,4097},
	{532,4088},
	{545,4080},
	{552,4068},
	{557,4054},
	{560,4037},
	{557,4020},
	{565,4006},
	{570,3995},
	{572,3984},
	{577,3975},
	{582,3966},
	{582,3956},
	{587,3947},
	{590,3936},
	{587,3924},
	{585,3912},
	{585,3900},
	{582,3888},
	{582,3877},
	{585,3868},
	{590,3860},
	{597,3853},
	{602,3846},
	{612,3840},
	{620,3834},
	{627,3829},
	{635,3824},
	{650,3820},
	{652,3814},
	{665,3810},
	{672,3806},
	{682,3802},
	{692,3798},
	{700,3795},
	{710,3791},
	{720,3789},
	{730,3786},
	{750,3786},
	{762,3783},
	{785,3782},
	{807,3779},
	{832,3778},
	{852,3776},
	{867,3773},
	{887,3771},
	{900,3766},
	{917,3762},
	{932,3756},
	{947,3748},
	{965,3741},
	{977,3730},
	{1000,3720},
	{1014,3710},
	{1035,3704},
	{1060,3699},
	{1090,3696},
	{1127,3694},
	{1177,3691},
	{1220,3688},
	{1215,3686},
	{1205,3682},
	{1200,3679},
	{1187,3675},
	{1175,3669},
	{1162,3663},
	{1140,3656},
	{1125,3650},
	{1110,3644},
	{1100,3639},
	{1090,3634},
	{1080,3630},
	{1070,3627},
	{1060,3622},
	{1050,3619},
	{502,3400}
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{148,4337},
	{160,4321},
	{165,4307},
	{165,4292},
	{165,4278},
	{167,4265},
	{170,4251},
	{167,4237},
	{170,4224},
	{172,4211},
	{172,4197},
	{175,4184},
	{177,4172},
	{177,4158},
	{180,4146},
	{177,4133},
	{182,4121},
	{180,4107},
	{182,4096},
	{182,4084},
	{187,4075},
	{190,4064},
	{190,4052},
	{192,4038},
	{195,4025},
	{197,4012},
	{200,4001},
	{200,3990},
	{202,3981},
	{210,3973},
	{210,3964},
	{215,3957},
	{215,3947},
	{215,3937},
	{210,3925},
	{200,3911},
	{190,3896},
	{185,3883},
	{177,3872},
	{172,3863},
	{170,3855},
	{175,3849},
	{175,3843},
	{175,3837},
	{180,3832},
	{180,3826},
	{182,3822},
	{185,3817},
	{187,3812},
	{185,3807},
	{190,3804},
	{187,3799},
	{195,3796},
	{197,3793},
	{197,3788},
	{192,3785},
	{192,3783},
	{192,3779},
	{200,3777},
	{197,3773},
	{195,3771},
	{197,3767},
	{197,3764},
	{200,3760},
	{207,3755},
	{217,3750},
	{220,3744},
	{225,3739},
	{222,3731},
	{227,3720},
	{227,3711},
	{222,3698},
	{220,3689},
	{217,3687},
	{225,3686},
	{240,3686},
	{255,3684},
	{265,3682},
	{275,3678},
	{282,3663},
	{282,3618},
	{300,3560},
	{335,3481},
	{372,3366},
	{330,3331},
	{287,3315},
	{265,3305},
	{250,3300},
	{250,3300},
	{250,3300},
	{250,3300}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{148,4343},
	{110,4329},
	{105,4314},
	{107,4300},
	{105,4286},
	{112,4273},
	{107,4258},
	{110,4245},
	{110,4232},
	{117,4219},
	{112,4204},
	{112,4191},
	{115,4178},
	{117,4165},
	{115,4152},
	{117,4139},
	{117,4126},
	{120,4114},
	{125,4103},
	{122,4089},
	{122,4078},
	{122,4065},
	{125,4055},
	{125,4043},
	{125,4031},
	{127,4020},
	{130,4008},
	{132,3998},
	{132,3988},
	{137,3980},
	{137,3969},
	{140,3960},
	{142,3952},
	{142,3941},
	{145,3932},
	{147,3922},
	{142,3910},
	{130,3894},
	{120,3880},
	{117,3869},
	{115,3861},
	{112,3853},
	{115,3847},
	{115,3840},
	{115,3834},
	{117,3829},
	{122,3824},
	{125,3819},
	{125,3814},
	{122,3809},
	{125,3804},
	{127,3800},
	{127,3795},
	{130,3792},
	{130,3788},
	{132,3785},
	{135,3782},
	{135,3778},
	{132,3774},
	{127,3768},
	{120,3759},
	{120,3753},
	{125,3750},
	{125,3746},
	{127,3742},
	{125,3736},
	{125,3731},
	{125,3726},
	{127,3721},
	{127,3713},
	{127,3704},
	{130,3694},
	{125,3681},
	{125,3675},
	{125,3673},
	{130,3672},
	{135,3671},
	{137,3669},
	{140,3667},
	{142,3661},
	{140,3635},
	{152,3590},
	{167,3532},
	{175,3450},
	{175,3450},
	{175,3450},
	{175,3450},
	{175,3450},
	{175,3450},
	{175,3450},
	{175,3450}
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

